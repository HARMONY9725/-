<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>漢字地図マップ</title>
<style>
body { font-family: monospace; padding: 20px; }
#routeDisplay { white-space: pre; font-size: 18px; line-height: 1.4; }
input, button { font-size: 16px; padding: 5px; margin: 5px; }
</style>
</head>
<body>

<h1>漢字地図ルート</h1>
<div>
  出発地: <input id="start" placeholder="例：東京駅">
  目的地: <input id="end" placeholder="例：渋谷駅">
  <button id="searchBtn">検索</button>
</div>

<pre id="routeDisplay"></pre>

<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
<script>
const display = document.getElementById("routeDisplay");

document.getElementById("searchBtn").addEventListener("click", ()=>{
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  if(!start || !end) return;

  const directionsService = new google.maps.DirectionsService();
  directionsService.route({
    origin: start,
    destination: end,
    travelMode: 'DRIVING'
  }, (result, status)=>{
    if(status === "OK"){
      const steps = result.routes[0].legs[0].steps;
      let mapText = "";
      steps.forEach((s, i)=>{
        let instr = s.instructions.replace(/<[^>]*>/g, "");
        // 方向を漢字に変換
        instr = instr.replace(/left/gi,"左").replace(/right/gi,"右")
                     .replace(/north/gi,"北").replace(/south/gi,"南")
                     .replace(/east/gi,"東").replace(/west/gi,"西")
                     .replace(/road|street/gi,"道").replace(/intersection/gi,"十")
                     .replace(/signal/gi,"灯").replace(/square/gi,"□");
        mapText += `${i+1}：${instr}\n`;
      });
      display.textContent = mapText;
    } else {
      display.textContent = "ルート取得失敗";
    }
  });
});
</script>

</body>
</html>
