<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>漢字地図マップ</title>
<style>
body {
  font-family: monospace;
  padding: 20px;
  background-color: #f0f0f0;
}
#routeDisplay {
  white-space: pre;
  font-size: 18px;
  line-height: 1.4;
  margin-top: 20px;
  background: #fff;
  padding: 10px;
  border: 1px solid #888;
  max-height: 80vh;
  overflow-y: auto;
}
input, button {
  font-size: 16px;
  padding: 5px;
  margin: 5px;
}
button { cursor: pointer; }
</style>
</head>
<body>

<h1>漢字地図ルート</h1>
<div>
  出発地: <input id="start" placeholder="例：東京駅">
  目的地: <input id="end" placeholder="例：渋谷駅">
  <button id="searchBtn">検索</button>
</div>

<pre id="routeDisplay">ここに漢字地図が表示されます</pre>

<!-- Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
<script>
const display = document.getElementById("routeDisplay");

document.getElementById("searchBtn").addEventListener("click", ()=>{
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  if(!start || !end) { display.textContent = "出発地と目的地を入力してください"; return; }

  const directionsService = new google.maps.DirectionsService();
  directionsService.route({
    origin: start,
    destination: end,
    travelMode: 'DRIVING'
  }, (result, status)=>{
    if(status === "OK"){
      const steps = result.routes[0].legs[0].steps;
      let mapText = "漢字地図風ルート表示\n\n";
      steps.forEach((s, i)=>{
        let instr = s.instructions.replace(/<[^>]*>/g, "");
        // 漢字化
        instr = instr.replace(/left/gi,"左").replace(/right/gi,"右")
                     .replace(/north/gi,"北").replace(/south/gi,"南")
                     .replace(/east/gi,"東").replace(/west/gi,"西")
                     .replace(/road|street/gi,"道").replace(/intersection/gi,"十")
                     .replace(/signal/gi,"灯").replace(/square/gi,"□")
                     .replace(/ramp/gi,"斜道").replace(/roundabout/gi,"環");
        mapText += `${i+1}：${instr}\n`;
      });
      display.textContent = mapText;
    } else {
      display.textContent = "ルート取得失敗: " + status;
    }
  });
});
</script>

</body>
</html>
